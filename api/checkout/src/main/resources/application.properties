server.port = 8083
server.tomcat.connection-timeout=10000

frontend.user=${FRONTEND_USERNAME}
frontend.password=${FRONTEND_PASSWORD}

checkout.user=${CHECKOUT_API_USERNAME}
checkout.password=${CHECKOUT_API_PASSWORD}

shipping.user=${SHIPPING_API_USERNAME}
shipping.password=${SHIPPING_API_PASSWORD}

cartApi=http://${CART_API_SERVICE_HOST}:${CART_API_SERVICE_PORT}/api/cart/
shippingApi=http://${SHIPPING_API_SERVICE_HOST}:${SHIPPING_API_SERVICE_PORT}/api/shipping/

resilience4j.ratelimiter:
  instances:
    checkoutServiceRateLimiter:
      limitForPeriod: 1
      limitRefreshPeriod: 5s
      timeoutDuration: 0s

resilience4j.circuitbreaker:
  configs:
    default:
      slidingWindowType: COUNT_BASED
      slidingWindowSize: 100
      permittedNumberOfCallsInHalfOpenState: 10
      waitDurationInOpenState: 10
      failureRateThreshold: 60
      registerHealthIndicator: true
  instances:
    checkoutServiceCircuitBreaker:
      baseConfig: default

resilience4j.bulkhead:
  instances:
    checkoutServiceBulkhead:
      maxConcurrentCalls: 10
      maxWaitDuration: 10ms

resilience4j.timelimiter:
  instances:
    checkoutServiceTimeLimiter:
      timeoutDuration: 2s

resilience4j.retry:
  instances:
    checkoutServiceRetry:
      maxRetryAttempts: 2
      waitDuration: 100

